<!DOCTYPE html>
<html>
<head>
<title>Single</title>
<link href="../css/style.css" rel="stylesheet" type="text/css" media="all" />
<link href="../resource/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<!-- js -->
<script src="../resource/js/jquery.min.js"></script>
    <!-- //js -->
<!-- for-mobile-apps -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //for-mobile-apps -->
<!-- start-smoth-scrolling -->
<script type="text/javascript" src="../js/move-top.js"></script>
<script type="text/javascript" src="../js/easing.js"></script>
<script type="text/javascript">
	jQuery(document).ready(function($) {
		$(".scroll").click(function(event){		
			event.preventDefault();
			$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
		});
	});
</script>
<!-- start-smoth-scrolling -->
</head>
	
<body>
	<div class="psd">
	<div class="container">
<!-- header -->
		<div class="header">
			<div class="logo">
				<a href="index.html"><img src="../images/logo.png" alt=" " /></a>
			</div>
			<div class="logo-right">
				<span class="menu"><img src="../images/menu.png" alt=" "/></span>
				<ul class="nav1">
					<li><a href="index.html" class="act">HOME<span>START HERE</span></a></li>
					<li><a href="personalInfo.html" class="act3">个人中心<span>详情</span></a></li>
					<li class="cap"><a href="#" class="act4">下单模块<span>测试</span></a></li>
					<li><a href="login.html" class="act1">退出账号<span>退出</span></a></li>
				</ul>
			</div>
			<div class="clearfix"> </div>
				<!-- script for menu -->
					<script> 
						$( "span.menu" ).click(function() {
						$( "ul.nav1" ).slideToggle( 300, function() {
						 // Animation complete.
						});
						});
					</script>
				<!-- //script for menu -->
		</div>
<!-- //header -->
<!-- single -->
        <div style="color:white">

		</div>
	<div class="single">
		<div class="clearfix"> </div>
		<div class="three-com">
			<div class="leave-comment">
				<h3>确定订单</h3>
				<p>向厂家提出订单需求，以获得产品</p>

				<form class="form-horizontal" role="form">
					<fieldset>

						<div class="form-group">
							<label class="col-sm-2 control-label" for="OgoodsName">货物名称</label>
							<div class="col-sm-4">
								<input style="width: 100%" class="form-control" id="OgoodsName" type="text" placeholder="货物名"/>
							</div>
							<label class="col-sm-2 control-label" for="OunitPrice">货物单价</label>
							<div class="col-sm-4">
								<input style="width: 100%" class="form-control" id="OunitPrice" type="number" placeholder="货物单价"/>
							</div>
						</div>
						<div class="form-group">

							<label class="col-sm-2 control-label" for="OpercentOfPass">合格率</label>
							<div class="col-sm-4">
								<input style="width: 100%" class="form-control" id="OpercentOfPass" type="number" placeholder="合格率"/>
							</div>

							<label class="col-sm-2 control-label" for="OneedAmount">货物数量</label>
							<div class="col-sm-4">
								<input style="width: 100%" class="form-control" id="OneedAmount" type="number" placeholder="货物数量"/>
							</div>


						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label" for="OtimeLimit">到货天数</label>
							<div class="col-sm-4">
								<input style="width: 100%" class="form-control" id="OtimeLimit" type="number" placeholder="到货天数"/>
							</div>

							<label class="col-sm-2 control-label">城市地址</label>
							<div class="col-sm-4">
								<select id="addressSelect" class="form-control">
									
								</select>
							</div>

						</div>
						
						
			    		<div class="form-group">
							<label class="col-sm-2 control-label" for="timeLimit">备注信息</label>
							<div class="col-sm-10">
								<textarea name="" class="form-control" id="" cols="30" rows="10" placeholder="备注信息"></textarea>
							</div>
						</div>
						
						
					</fieldset>
					

				</form>




				<input type="submit" value="发送订单" id="sendIt">
				<div class="clearfix"> </div>

			</div>
		</div>
	</div>
<!-- single -->
<!-- footer -->
	<div class="footer">
		<div class="footer-left">
			<ul>
				<li><a href="index.html"><img src="../images/logo1.png" alt=" " /></a><span> |</span></li>
				<li><p>提供优质的供应链服务 <span>0800 (123) 4567 </span></p></li>
			</ul>
		</div>
		<div class="footer-right">
			<p>Copyright &copy; 2018.NiXteam.</p>
		</div>
		<div class="clearfix"> </div>
	</div>
<!-- //footer -->
	</div>
	</div>
<!-- here stars scrolling icon -->
	<script type="text/javascript">
		$(document).ready(function() {




            $.ajax({
                type:"post",
                url:"/city/findCityAll.do",
                async:true,
                dataType: 'json',
                success:function (data) {
                    var str = "";
                    str+='<option value="">'+"--请选择--"+'</option>'
                    for(var i = 0;i<data.data.length;i++){
                        str+='<option value='+data.data[i].id+'>'+data.data[i].cityName+'</option>'
                    }
                    $("#addressSelect").html(str);

                    // $(".selectpicker" ).selectpicker('refresh');
                }
            });








			/*
			var defaults = {
				containerID: 'toTop', // fading element id
				containerHoverID: 'toTopHover', // fading element hover id
				scrollSpeed: 1200,
				easingType: 'linear'
			};
			*/

			$().UItoTop({ easingType: 'easeOutQuart' });

		});

		//发送订单
		$("#sendIt").click(function (){

            var storage=window.localStorage;
            var userId = storage["id"];
			console.log(userId);

		    var goodsName = $("#OgoodsName").val();
		    var unitPrice = $("#OunitPrice").val();
		    var needAmount = $("#OneedAmount").val();
		    var timeLimit = $("#OtimeLimit").val();
		    var percentOfPass = $("#OpercentOfPass").val();
		    var addressId = $("#addressSelect").val();

		    if(goodsName != null && goodsName != "" && unitPrice != null && unitPrice != "" && needAmount != null && needAmount != "" && timeLimit != null && timeLimit != ""&& percentOfPass != null && percentOfPass != "" && addressId !=null && addressId != ""){

		        $.ajax({
                    type: "post",
                    url: "/api/order/add.do",
                    data: {

                        "goodsName": goodsName,
                        "unitPrice": unitPrice,
                        "needAmount": needAmount,
                        "timeLimit": timeLimit,
                        "percentOfPass": percentOfPass,
                        "addressId": addressId,
						"userId": userId
                    },
                    dataType: 'json',
                    success: function (data) {
                        if(data.status==1) {
                            alert("下单成功");
                            window.location.href="orderPlace.html";
                        }
                        else{
                            alert("下单失败");
                            window.location.href="orderPlace.html";
                        }
                    },
                    error: function () {
                        alert("下单失败");
                        window.location.href="orderPlace.html";
                    }
                });
			}
			else{
		        alert("下单失败\n请填写完整订单信息！！！");
                window.location.href="orderPlace.html";
			}


		});




	</script>
<!-- //here ends scrolling icon -->
</body>
</html>